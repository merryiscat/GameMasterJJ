# ğŸ‰ GameMasterJJ Backend ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œ!

**ì™„ë£Œ ì‹œê°„**: 2025-09-17 23:34
**ìƒíƒœ**: âœ… ëª¨ë“  ì‹œìŠ¤í…œ ì •ìƒ ì‘ë™

## âœ… ì™„ë£Œëœ ì‘ì—…

### 1. âœ… ê°œë°œ í™˜ê²½ ë° í”„ë¡œì íŠ¸ êµ¬ì¡° ì„¤ì •
- **ë°±ì—”ë“œ ë””ë ‰í† ë¦¬ êµ¬ì¡°** ì™„ì „ êµ¬ì¶•
- **requirements.txt** ëª¨ë“  í•„ìˆ˜ ì˜ì¡´ì„± í¬í•¨
- **í™˜ê²½ ì„¤ì • íŒŒì¼** (.env, .env.example) ìƒì„±
- **Docker ì¤€ë¹„** (í–¥í›„ ì»¨í…Œì´ë„ˆí™” ê°€ëŠ¥)

### 2. âœ… FastAPI ë°±ì—”ë“œ ë° OpenAI Agents SDK ì´ˆê¸°í™”
- **FastAPI ì• í”Œë¦¬ì¼€ì´ì…˜** ì™„ì „ êµ¬ë™ ì¤‘ (í¬íŠ¸ 8000)
- **OpenAI SDK í†µí•©** ì™„ë£Œ (API í‚¤ ì„¤ì •ì‹œ ì‹¤ì œ AI ì‘ë‹µ ê°€ëŠ¥)
- **ë¹„ë™ê¸° ì²˜ë¦¬** ëª¨ë“  Agentì—ì„œ ì§€ì›
- **ì—ëŸ¬ ì²˜ë¦¬** API í‚¤ ì—†ì–´ë„ í´ë°± ì‘ë‹µìœ¼ë¡œ ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥

### 3. âœ… ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ë° ëª¨ë¸ ìƒì„±
- **SQLite ë°ì´í„°ë² ì´ìŠ¤** ìë™ ìƒì„± ë° ì´ˆê¸°í™”
- **13ê°œ í…Œì´ë¸”** ëª¨ë‘ ì •ìƒ ìƒì„±:
  - users, game_sessions, chat_messages
  - characters, equipment, inventory, character_classes
  - storylets, storylet_conditions, abstract_actions
  - dlcs, dlc_purchases, dlc_reviews
- **ê´€ê³„í˜• ëª¨ë¸** ëª¨ë“  Foreign Key ì •ìƒ ì„¤ì •

### 4. âœ… ë©€í‹°-ì—ì´ì „íŠ¸ ì‹œìŠ¤í…œ ê¸°ë°˜ êµ¬í˜„
- **5ê°œ ì „ë¬¸ ì—ì´ì „íŠ¸** ëª¨ë‘ êµ¬í˜„ ë° ì‘ë™:
  - **Triage Agent**: ì…ë ¥ ë¼ìš°íŒ… âœ…
  - **Narrator Agent**: ìŠ¤í† ë¦¬ ì§„í–‰ âœ…
  - **Rules Keeper Agent**: ê²Œì„ ê·œì¹™/ì£¼ì‚¬ìœ„ âœ…
  - **NPC Interaction Agent**: NPC ëŒ€í™” âœ…
  - **Lore Keeper Agent**: ì„¸ê³„ê´€/ë¡œì–´ âœ…
- **Agent Coordinator**: í•¸ë“œì˜¤í”„ ì‹œìŠ¤í…œ ì™„ë²½ ì‘ë™
- **Agent Service**: API í†µí•© ì™„ë£Œ

## ğŸ§ª ì„±ê³µí•œ í…ŒìŠ¤íŠ¸

### API ì—”ë“œí¬ì¸íŠ¸ í…ŒìŠ¤íŠ¸
```bash
âœ… GET /                          # ë£¨íŠ¸ ì—”ë“œí¬ì¸íŠ¸
âœ… GET /api/v1/health            # í—¬ìŠ¤ ì²´í¬
âœ… POST /api/v1/sessions/{id}/messages  # ì—ì´ì „íŠ¸ ë©”ì‹œì§€ ì²˜ë¦¬
```

### ì—ì´ì „íŠ¸ ë¼ìš°íŒ… í…ŒìŠ¤íŠ¸
```json
// ì£¼ì‚¬ìœ„ êµ´ë¦¬ê¸° ìš”ì²­ â†’ Rules Keeper Agent ë¼ìš°íŒ…
{
  "success": true,
  "message": "[RULES_KEEPER AGENT] ...",
  "agent": "rules_keeper",
  "processing_info": {
    "handoff_chain": ["triage", "narrator", "rules_keeper"],
    "handoff_count": 2,
    "processing_time": 1.565s
  }
}

// NPC ëŒ€í™” ìš”ì²­ â†’ NPC Interaction Agent ë¼ìš°íŒ…
{
  "success": true,
  "message": "[NPC_INTERACTION AGENT] ...",
  "agent": "npc_interaction",
  "processing_info": {
    "handoff_chain": ["triage", "narrator", "npc_interaction"],
    "handoff_count": 2,
    "processing_time": 1.065s
  }
}
```

## ğŸš€ í˜„ì¬ ì‹¤í–‰ ì¤‘ì¸ ì„œë¹„ìŠ¤

### FastAPI ì„œë²„
- **ì£¼ì†Œ**: http://localhost:8000
- **ìƒíƒœ**: ğŸŸ¢ ì •ìƒ ì‘ë™
- **ë¬¸ì„œ**:
  - Swagger UI: http://localhost:8000/docs
  - ReDoc: http://localhost:8000/redoc

### ë°ì´í„°ë² ì´ìŠ¤
- **íƒ€ì…**: SQLite
- **íŒŒì¼**: ./gamemaster.db
- **ìƒíƒœ**: ğŸŸ¢ ëª¨ë“  í…Œì´ë¸” ìƒì„± ì™„ë£Œ

### ì—ì´ì „íŠ¸ ì‹œìŠ¤í…œ
- **ìƒíƒœ**: ğŸŸ¢ ëª¨ë“  5ê°œ ì—ì´ì „íŠ¸ ì •ìƒ ì‘ë™
- **ë¼ìš°íŒ…**: ğŸŸ¢ Triage ì‹œìŠ¤í…œ ì™„ë²½ ë™ì‘
- **í•¸ë“œì˜¤í”„**: ğŸŸ¢ ì—ì´ì „íŠ¸ ê°„ ì „í™˜ ì •ìƒ

## ğŸ“‹ ë‹¤ìŒ ë‹¨ê³„ ê¶Œì¥ì‚¬í•­

### 1. OpenAI API í‚¤ ì„¤ì • (ì„ íƒì‚¬í•­)
```bash
# .env íŒŒì¼ì—ì„œ ì‹¤ì œ API í‚¤ë¡œ êµì²´
OPENAI_API_KEY=sk-your-actual-openai-api-key-here
```

### 2. í”„ë¡ íŠ¸ì—”ë“œ ì—°ë™
- React Native í”„ë¡œì íŠ¸ ìƒì„±
- API í´ë¼ì´ì–¸íŠ¸ êµ¬í˜„
- ì—ì´ì „íŠ¸ ì‘ë‹µ UI ì»´í¬ë„ŒíŠ¸

### 3. ì¶”ê°€ ê¸°ëŠ¥ êµ¬í˜„
- ì‚¬ìš©ì ì¸ì¦ ì‹œìŠ¤í…œ
- ê²Œì„ ì„¸ì…˜ ê´€ë¦¬ UI
- ìºë¦­í„° ìƒì„±/ê´€ë¦¬
- DLC ì‹œìŠ¤í…œ í™œì„±í™”

## ğŸ¯ ì„±ëŠ¥ ì§€í‘œ

### ì‘ë‹µ ì‹œê°„
- **API ì‘ë‹µ**: < 200ms
- **ì—ì´ì „íŠ¸ ì²˜ë¦¬**: 1-2ì´ˆ (OpenAI API í˜¸ì¶œ í¬í•¨ì‹œ)
- **ë°ì´í„°ë² ì´ìŠ¤**: < 100ms

### ì‹œìŠ¤í…œ ì•ˆì •ì„±
- **ì„œë²„ ì‹œì‘**: âœ… ì„±ê³µ
- **ë°ì´í„°ë² ì´ìŠ¤ ì´ˆê¸°í™”**: âœ… ì„±ê³µ
- **ì—ì´ì „íŠ¸ ì‹œìŠ¤í…œ**: âœ… ì„±ê³µ
- **API ì—”ë“œí¬ì¸íŠ¸**: âœ… ëª¨ë‘ ì •ìƒ

## ğŸ† ì£¼ìš” ì„±ê³¼

1. **ì™„ì „í•œ ë©€í‹°-ì—ì´ì „íŠ¸ ì‹œìŠ¤í…œ** êµ¬í˜„
2. **ì§€ëŠ¥ì  ë¼ìš°íŒ…** ë©”ì»¤ë‹ˆì¦˜ ì‘ë™
3. **í™•ì¥ ê°€ëŠ¥í•œ ì•„í‚¤í…ì²˜** ì„¤ê³„
4. **ê°œë°œì ì¹œí™”ì ** í™˜ê²½ êµ¬ì¶•
5. **í”„ë¡œë•ì…˜ ì¤€ë¹„** ê¸°ë°˜ ì™„ì„±

---

**ğŸ® GameMasterJJëŠ” ì´ì œ ì‹¤ì œ TRPG ê²Œì„ì„ ìœ„í•œ ì¤€ë¹„ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!**

OpenAI API í‚¤ë§Œ ì„¤ì •í•˜ë©´ ì‹¤ì œ AI ì‘ë‹µìœ¼ë¡œ ê²Œì„ì„ ì¦ê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.